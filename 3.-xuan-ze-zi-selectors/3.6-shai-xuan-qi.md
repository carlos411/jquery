# 3.6 篩選器及 Traversing

以下範例，直接在 `practice/selectors.html` 頁面中測試觀察：

## 篩選器 Filters

### .first()

找到的所有項目中的第一個。例：

```javascript
$("p").first().css("color", "red");
```

### .last()

找到的所有項目中的最後一個。

```javascript
$("p").last().css("color", "red");
```

### .eq(n)

第幾個元素，從 0 開始，0 代表第一個。以此類推。

**`-1`** 代表倒數第一個；**`-2`** 代表倒數第二個。以此類推。

```javascript
$("p").eq(0).css("color", "red"); // 第 1 個
```

```javascript
$("p").eq(1).css("color", "red"); // 第 2 個
```

```javascript
$("p").eq(-1).css("color", "red"); // 倒數第 1 個
```

```javascript
$("p").eq(-2).css("color", "red"); // 倒數第 2 個
```

### .slice(start, last)

從索引值開始(start)，到最後的索引值(last)，但並不包含最後一個。

如果 last 沒有提供，就是直接取到最後一個。

```javascript
// 從索引值 1 到 3，但不包含 3
$("p").slice(1, 3).css("color", "red");
```

```javascript
// 從索引值 1，然後到最後一個
$("p").slice(1).css("color", "red");
```

### .has(el)

內層有 el 元素的話，就符合。例：

```javascript
// p 標籤的內層，如果有 span.abc 的話，這個 p 元素就符合。
$("p").has("span.abc").css("color", "red");
```

### .filter()

例：p 標籤，有 para3 這個 class 的話，就符合：

```javascript
$("p").filter(".para3").css("color", "red");
```

例：p 標籤，偶數個的話(從 0 開始算)，就符合：

```javascript
$("p").filter(":even").css("color", "red");
```

例：p 標籤，奇數個的話，就符合：

```javascript
$("p").filter(":odd").css("color", "red");
```

例：p 標籤，自己索引值(從 0 開始算)除以 3 的餘數是 0 的話，就符合(第 0、3、6、9…符合)：

```javascript
$("p").filter(function(i){
  return (i % 3 == 0);
}).css("color", "red");
```

### .not()

例：p 標籤，沒有 class 為 para 的話，就符合：

```javascript
$("p").not(".para").css("color", "red");
```

例：p 標籤，**非**偶數項目的，就符合：

```javascript
$("p").not(":even").css("color", "red");
```

例：p 標籤，**非**奇數項目的，就符合：

```javascript
$("p").not(":odd").css("color", "red");
```



### .is()

用來判斷是否符號指定的規則。

```javascript
console.log($("#my_title").is("h1")); // true
console.log($("#my_title").is("p")); // false

console.log($("#my_title").is(":nth-child(2)")); // true
console.log($("#my_title").is(":nth-child(3)")); // false
```



## Traversing



### .prev()、.next()

在 `practice/selectors.html` 新增以下原始碼：

```markup
<p id="p1">段落1</p>
<p id="p2">段落2</p>
<p id="p3">段落3</p>
```

例：同層前一個

```javascript
$("#p2").prev().css("color", "red");
```

例：同層下一個

```javascript
$("#p2").next().css("color", "red");
```



### .prevAll()、.nextAll()

例：同層前面全部

```javascript
$("#p1").prevAll().css("color", "red");
```

例：同層後面全部

```javascript
$("#p1").nextAll().css("color", "red");
```



### .siblings()

例：同層元素

```javascript
$("#p1").siblings().css("color", "red");
```



### .parent()

一樣在 `practice/selectors.html` 頁面中，新增以下原始碼：

```markup
<div id="outer_div">
  <div id="inner_div">
    <p>段落</p>
    <ol id="ol_list">
      <li id="i1">項目一</li>
      <li id="i2">項目二</li>
      <li id="i3">項目三</li>
    </ol>
  </div>
</div>
```

例：取到父元素，即 ol 標籤：

```javascript
$("#i1").parent().css("border", "1px solid red");
```

例：指定要找父元素為 div 的標籤(此例會找不到，因為父元素不是 div 標籤)：

```javascript
$("#i1").parent("div").css("border", "1px solid red");
```



### .parents(el)

例：所有父元素：

```javascript
// 還會找到 body、html 標籤
$("#i1").parents().css("border", "1px solid red");
```

例：一直往父元素找到所有符合 el 的元素，此例為找到 #li 的所有父元素為 div 標籤：

```javascript
$("#i1").parents("div").css("border", "1px solid red");
```

### .closest(el)

例：往父層找，找到第一個符合 el 的元素：

```javascript
$("#i1").closest("div").css("border", "1px solid red");
```

### .children()

例：找到第一層子元素

```javascript
$("#outer_div").children().css("border", "1px solid red");
```

```javascript
$("#ol_list").children().css("border", "1px solid red");
```

例：找到第一層子元素為 p 標籤的元素：

```javascript
$("#inner_div").children("p").css("border", "1px solid red");
```



### .find(el)

例：一直往內層找(不只是第一層子元素)，找到所有的 p 標籤的元素：

```javascript
$("#outer_div").find("p").css("border", "1px solid red");
```

```javascript
$("#outer_div").find("li").css("border", "1px solid red");
```



## 參考

[jQuery Traversing](https://api.jquery.com/category/traversing/)

[jQuery Filtering](https://api.jquery.com/category/traversing/filtering/)
