# 5.4 事件觸發寫法及注意事項

## click 事件與事件冒泡狀況(Event Bubble Up)

click 事件的寫法，使用 **`.on()`**：

```javascript
$("div.outer_block").on("click", function(){
  
  // 點擊後，要執行的程式...
  
});
```

範例：

{% embed url="https://codepen.io/carlos411/pen/YzyzbMW" %}

如果要停止事件冒泡狀況發生，在正確的位置執行以下程式：

```javascript
e.stopPropagation();
```



範例：[燈箱](https://codepen.io/carlos411/pen/mdpYWmq?editors=1010)。

## 滑鼠相關事件：注意事件冒泡狀況

### mouseenter、mouseleave

mouseenter：滑鼠移入時觸發。(不會發生冒泡狀況)

mouseleave：滑鼠移出時觸發。(不會發生冒泡狀況)



範例：

{% embed url="https://codepen.io/carlos411/pen/vYNYwVG" %}



### mouseover、mouseout

mouseover：滑鼠移入時觸發。(會發生冒泡狀況)

mouseout：滑鼠移出時觸發。(會發生冒泡狀況)

範例(不用背，要會觀察)：

{% embed url="https://codepen.io/carlos411/pen/zYvYQyX" %}



### mousemove

說明：滑鼠游標在元素上移動時觸發。(會發生事件冒泡狀況)

範例：`5_4_mousemove.html`

{% embed url="https://codepen.io/carlos411/pen/RwWwzaV" %}



## 一次綁定多個事件

mouseenter 與 mouseleave 事件觸發時，執行相同的程式：

```javascript
$("div.div_block").on("mouseenter", function(){
  $(this).toggleClass("change_bg");
});
$("div.div_block").on("mouseleave", function(){
  $(this).toggleClass("change_bg");
});
```

可改寫成：

```javascript
$("div.div_block").on("mouseenter mouseleave", function(){
  $(this).toggleClass("change_bg");
});
```

範例：`5_4_multi_event.html`

{% embed url="https://codepen.io/carlos411/pen/YzyzoGZ" %}

## 關於 this

事件觸發時，this 指的就是那個元素。

```javascript
$("#the_link").on("click", function(e){
  this.href = "https://tw.yahoo.com";
});
```

等同於(可把 this 丟到 jQuery 函式中，使用相關操作)：

```javascript
$("#the_link").on("click", function(e){
  $(this).attr("href", "https://tw.yahoo.com");
});
```

範例： `5_4_this.html`

{% embed url="https://codepen.io/carlos411/pen/abvbgRm" %}



## 停止預設行為

### 連結

連結的預設行為是是將連結開啟。可以透過以下程式來停止：

```javascript
e.preventDefault();
```

範例：`5_4_link_prevent_default.html`

{% embed url="https://codepen.io/carlos411/pen/ZEbEdKg" %}



### 拖曳

在預設的情況下，沒有任何元素是允許被拖曳至此處的，如要允許，需停止該元素的預設行為。即可透過以下程式：

```javascript
e.preventDefault();
```

範例：`5_4_drag_prevent_default.html`

{% embed url="https://codepen.io/carlos411/pen/XWmWLeJ" %}





## 練習：表單停止資料送出的預設行為、keydown

建立 `jquery/practice/form_submit.html` 檔案，內容如下：

```markup
<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8">
    <title>jQuery 相關練習</title>
  </head>
  <body>

    <form action="https://tw.yahoo.com" method="get" id="myform">
      <input type="text" id="myname" name="myname">
      <button type="submit">資料送出</button>
    </form>

    <script src="./vendors/jquery/jquery-3.4.1.min.js"></script>
    <script>
      $(function(){
        // code here...
      });
    </script>
  </body>
</html>
```

說明：表單送出事件的寫法：

```javascript
$("#myform").on("submit", function(){
});
```

接著請撰寫以下兩個：

* 如果沒有填寫資料，表單不能送出，然後用 `alert()` 顯示「請輸入資料」。
* 如果有填寫資料，就表單按鈕原來預設的形式將資料送出。





參考作法：

{% embed url="https://codepen.io/carlos411/pen/ExKPYjj" %}

